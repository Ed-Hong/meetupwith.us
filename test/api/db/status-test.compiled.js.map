{"version":3,"sources":["status-test.es6"],"names":["status","describe","attributes","available","descrip","beforeEach","it","stat","create","description","availability","equal","findOne","e","_id","findOneAndUpdate"],"mappings":";;;;AAAA;;IAAYA,M;;AACZ;;AACA;;;;;;;;AAEAC,SAAS,eAAT,EAA0B,MAAM;AAC9B,QAAMC,aAAa;AACjBC,eAAW,IADM;AAEjBC,aAAS,cAFQ,CAEO;AAFP,GAAnB;AAIAC,sCAAW,aAAY;AACrB,UAAM,mBAAN;AACD,GAFD;;AAIAJ,WAAS,WAAT,EAAsB,MAAM;AACzBK,OAAG,4DAAH,2BAAiE,aAAY;AAC5E,YAAMC,OAAO,MAAMP,OAAOQ,MAAP,CAAc,EAACC,aAAaP,WAAWE,OAAzB;AAC/BM,sBAAcR,WAAWC,SADM,EAAd,CAAnB;AAEA,uBAAOQ,KAAP,CAAaJ,KAAKE,WAAlB,EAA+BP,WAAWE,OAA1C;AACA,uBAAOO,KAAP,CAAaJ,KAAKG,YAAlB,EAAgCR,WAAWC,SAA3C;AACD,KALA;AAMF,GAPD;;AASAF,WAAS,YAAT,EAAuB,MAAM;AAC3BK,OAAG,iDAAH,2BAAsD,aAAY;AAC9D,UAAG;AACD,cAAMN,OAAOY,OAAP,CAAe,EAACF,cAAc,IAAf,EAAf,CAAN;AACD,OAFD,CAEE,OAAMG,CAAN,EAAS;AAAE;AAAQ;AACrB,4BAAO,KAAP;AACH,KALD;;AAOAP,OAAG,yDAAH,2BAA8D,aAAY;AACxE,YAAMN,OAAOQ,MAAP,CAAc,EAACC,aAAaP,WAAWE,OAAzB;AAClBM,sBAAcR,WAAWC,SADP,EAAd,CAAN;AAEA,YAAMH,OAAOQ,MAAP,CAAc,EAACC,aAAa,UAAd;AAClBC,sBAAc,KADI,EAAd,CAAN;AAEA,UAAI;AACF,cAAME,QAAQ,EAACH,aAAa,eAAd,EAAR,CAAN;AACD,OAFD,CAEE,OAAOI,CAAP,EAAU;AACV;AACD,OAAC,sBAAO,KAAP;AACH,KAVD;;AAYAP,OAAG,kDAAH,2BAAuD,aAAY;AAAA,kBACnD,MAAMN,OAAOQ,MAAP,CAAc,EAACC,aAAaP,WAAWE,OAAzB;AAChCM,sBAAcR,WAAWC,SADO,EAAd,CAD6C;;AAAA,YAC1DW,GAD0D,SAC1DA,GAD0D;;AAGjE,YAAMP,OAAO,MAAMP,OAAOY,OAAP,CAAeE,GAAf,CAAnB;AACA,uBAAOH,KAAP,CAAaJ,KAAKE,WAAlB,EAA+BP,WAAWE,OAA1C;AACA,uBAAOO,KAAP,CAAaJ,KAAKG,YAAlB,EAAgCR,WAAWC,SAA3C;AACD,KAND;AAOD,GA3BD;;AA6BAF,WAAS,qBAAT,EAAgC,MAAM;AACpCK,OAAG,qEAAH,2BAA0E,aAAY;AACpF,UAAI;AACF,cAAMN,OAAOe,gBAAP,CAAwB,EAACL,cAAc,IAAf,EAAxB,EAA8C,EAACD,aAAa,UAAd;AAClDC,wBAAc,KADoC,EAA9C,CAAN;AAED,OAHD,CAGE,OAAOG,CAAP,EAAU;AAAE;AAAQ;AACtB,4BAAO,KAAP;AACD,KAND;;AAQAP,OAAG,qDAAH,2BAA0D,aAAY;AAAA,kBACtD,MAAMN,OAAOQ,MAAP,CAAc,EAACC,aAAaP,WAAWE,OAAzB;AAChCM,sBAAcR,WAAWC,SADO,EAAd,CADgD;;AAAA,YAC7DW,GAD6D,SAC7DA,GAD6D;;AAGpE,YAAMP,OAAO,MAAMP,OAAOe,gBAAP,CAAwB,EAACD,GAAD,EAAxB,EAA+B,EAACL,aAAa,UAAd;AAChDC,sBAAc,KADkC,EAA/B,CAAnB;AAEA,uBAAOC,KAAP,CAAaJ,KAAKE,WAAlB,EAA+B,UAA/B;AACA,uBAAOE,KAAP,CAAaJ,KAAKG,YAAlB,EAAgC,KAAhC;AACD,KAPD;AAQD,GAjBD;AAmBD,CAlED","file":"status-test.es6","sourcesContent":["import * as status from '../../../api/db/status.es6';\nimport {clear} from '../../../models/mongo/index.es6';\nimport assert from 'assert';\n\ndescribe('Status DB API', () => {\n  const attributes = {\n    available: true,\n    descrip: \"Hello World!\" // eslint-disable-line\n  };\n  beforeEach(async () => {\n    await clear();\n  });\n\n  describe('#create()', () => {\n     it('should create a Status object with attributes successfully', async () => {\n      const stat = await status.create({description: attributes.descrip,\n        availability: attributes.available});\n      assert.equal(stat.description, attributes.descrip);\n      assert.equal(stat.availability, attributes.available);\n    });\n  });\n\n  describe('#findOne()', () => {\n    it('should failt to find an uncreated Status object', async () => {\n        try{\n          await status.findOne({availability: true});\n        } catch(e) { return;}\n        assert(false);\n    });\n\n    it('should failt to find a Status object when several exist', async () => {\n      await status.create({description: attributes.descrip,\n        availability: attributes.available});\n      await status.create({description: \"studying\",\n        availability: false});\n      try {\n        await findOne({description: \"goodbye world\"});\n      } catch (e) {\n        return;\n      } assert(false);\n    });\n\n    it('should find a created Status object successfully', async () => {\n      const {_id} = await status.create({description: attributes.descrip,\n        availability: attributes.available});\n      const stat = await status.findOne(_id);\n      assert.equal(stat.description, attributes.descrip);\n      assert.equal(stat.availability, attributes.available);\n    });\n  });\n\n  describe('#findOneAndUpdate()', () => {\n    it('should failt to find and update a Status object that does not exist', async () => {\n      try {\n        await status.findOneAndUpdate({availability: true}, {description: \"studying\",\n          availability: false});\n      } catch (e) { return;}\n      assert(false);\n    });\n\n    it('should find and update a Status object successfully', async () => {\n      const {_id} = await status.create({description: attributes.descrip,\n        availability: attributes.available});\n      const stat = await status.findOneAndUpdate({_id}, {description: \"studying\",\n        availability: false});\n      assert.equal(stat.description, \"studying\");\n      assert.equal(stat.availability, false);\n    });\n  });\n\n});\n"]}